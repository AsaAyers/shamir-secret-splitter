(this["webpackJsonpshamir-secret-splitter"]=this["webpackJsonpshamir-secret-splitter"]||[]).push([[0],{134:function(e){e.exports=JSON.parse('{"name":"shamir-secret-splitter","version":"0.1.0","private":true,"homepage":"https://AsaAyers.github.io/shamir-secret-splitter","repository":"https://github.com/AsaAyers/shamir-secret-splitter","dependencies":{"@material-ui/core":"^4.9.11","@testing-library/jest-dom":"^4.2.4","@testing-library/react":"^9.5.0","@testing-library/user-event":"^7.2.1","@types/jest":"^24.9.1","@types/node":"^12.12.37","@types/react":"^16.9.34","@types/react-dom":"^16.9.6","classnames":"^2.2.6","gh-pages":"^2.2.0","pgp-word-list":"0.0.1","qrcode.react":"^1.0.0","react":"^16.13.1","react-dom":"^16.13.1","react-qr-reader":"^2.2.1","react-router-dom":"^5.1.2","react-scripts":"3.3.0","shamir":"^0.7.1","typeface-roboto":"0.0.75","typescript":"^3.8.3"},"scripts":{"predeploy":"npm run build","deploy":"gh-pages -d build","start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"@types/classnames":"^2.2.10","@types/qrcode.react":"^1.0.0","@types/react-qr-reader":"^2.1.3","@types/react-router-dom":"^5.1.4","text-encoder":"0.0.4"}}')},142:function(e,t,a){e.exports={page:"styles_page__1TtV8"}},147:function(e,t,a){e.exports=a.p+"static/media/BEEPPURE.cc279eb8.mp3"},148:function(e,t,a){e.exports={nav:"styles_nav__3BCA8",printTab:"styles_printTab__2mLlZ"}},155:function(e,t,a){e.exports=a(257)},160:function(e,t,a){},173:function(e,t){},175:function(e,t){},209:function(e,t){},210:function(e,t){},257:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),s=a(11),l=a.n(s),c=(a(160),a(36)),i=a(296),u=a(297),d=a(293),h=a(289),p=a(290),m=a(294),f=a(134),b=10,v=2;!function(e){e.Edit="/",e.Print="/print",e.Assemble="/assemble"}(n||(n={}));var y=a(6),g=a(15),E=a(298),x=a(291),w=a(292),j=a(25),S=a(137),O=a.n(S),k=a(258),N=a(26),A=a(52);var C={hex:"",text:"",error:null};function _(e,t){if("hex"===t.type){var a=t.payload;return{hex:a,text:Object(A.a)(a).join(" "),error:null}}if("text"===t.type){var n=t.payload,r=Object(A.b)(n);if("string"!==typeof r){var o=n.split(/\s+/g);o.pop(),r=Object(A.b)(o.join(" "))}return"string"==typeof r?{hex:r,text:n,error:null}:Object(N.a)({},e,{text:n,error:"".concat(r.word," not recognized")})}return e}function P(e){var t,a=e.part,n=e.onChange,r=e.index,s=function(){var e=o.a.useMemo((function(){return Math.random().toString(16).substr(2)}),[]);return function(t){return t+"-"+e}}(),l=null!==(t=null===a||void 0===a?void 0:a.hex)&&void 0!==t?t:"",c=o.a.useReducer(_,C,(function(e){var t=Object(A.a)(l).join(" ");return"string"===typeof t?Object(N.a)({},e,{text:t,hex:l}):e})),i=Object(g.a)(c,2),u=i[0],d=i[1];o.a.useEffect((function(){l!==u.hex&&d({type:"hex",payload:l})}));return o.a.createElement(E.a,{onChange:function(e){if(n){var t=e.target.value;d({type:"text",payload:t});var a=Object(A.b)(t);"string"===typeof a&&a!==l&&n(r,a)}},multiline:!0,id:s("part-".concat(r)),error:null!=u.error,helperText:u.error,value:u.text,name:"label",label:"Part ".concat(r)})}var R=a(142),I=a.n(R);function L(e){var t=e.part,a=e.children,r=Object(c.f)(),s=window.location.protocol+"//"+window.location.host+r.createHref({pathname:n.Assemble});return o.a.createElement(k.a,{className:I.a.page},o.a.createElement("h1",null,t.label),o.a.createElement("h2",null,t.index," of ",t.shares),a,o.a.createElement("strong",null,s),o.a.createElement("p",null,"If the QR code doesn't scan, you can go to the URL above and type in the following into the textbox for ",o.a.createElement("strong",null,"Part ",t.index),":"),o.a.createElement(P,{part:t,index:t.index}))}var T=a(66),W=a(88),q=a.n(W);function U(){var e=Object(c.g)();return o.a.useMemo((function(){if(!e.state)return null;var t=Number(e.state.shares||0),a=Number(e.state.threshold||0);return!t||!a||a>=t?null:{label:e.state.label||"",text:e.state.text||"",shares:t,threshold:a}}),[e.state])}function D(){var e=Object(c.f)(),t=U(),a=function(e){return o.a.useMemo((function(){if(null!=e)return Object(T.b)(e)}),[e])}(t);return o.a.useEffect((function(){null!=a&&null!=t&&t.label&&t.text&&t.shares&&t.threshold||e.push(n.Edit,t)}),[e,a,t]),null==a||null==t?null:o.a.createElement(o.a.Fragment,null,o.a.createElement(h.a,{className:q.a.noPrint},o.a.createElement(p.a,null,o.a.createElement("p",null,"Thew following pages contain your secret. Print them and distribute them to different locations. From the Assemble Secret page, if you scan any ",t.threshold," of these codes, it will display your secret.")),o.a.createElement(x.a,null,o.a.createElement(j.b,{to:{pathname:n.Edit,state:t}},o.a.createElement(w.a,{variant:"outlined"},"Edit")),o.a.createElement(w.a,{onClick:function(){return window.print()},variant:"outlined"},"Print"))),a.map((function(t){var a=new URLSearchParams;a.set("index",String(t.index)),a.set("hex",t.hex),a.set("shares",String(t.shares)),a.set("threshold",String(t.threshold)),a.set("label",String(t.label));var r={pathname:n.Assemble,hash:a.toString()},s=window.location.protocol+"//"+window.location.host+e.createHref(r);return o.a.createElement(L,{part:t,key:t.index},o.a.createElement(j.b,{to:r},o.a.createElement(O.a,{className:q.a.qr,renderAs:"svg",size:512,value:s})))})))}var B=Object(d.a)({title:{fontSize:14},content:{display:"flex",flexDirection:"column"}}),Q={label:"",text:"",shares:4,threshold:3};function F(){for(var e=B(),t=Object(c.f)(),a=U()||Q,r=o.a.useState(a),s=Object(g.a)(r,2),l=s[0],i=s[1],u=function(e){var t=Object(y.a)({},e.target.name,e.target.value);i((function(e){return Object.assign({},e,t)}))},d=[],f=[],j=1;j<=b;j++)j>=v&&d.push(j),j<l.shares&&f.push(j);return o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t.push(n.Print,l)}},o.a.createElement(h.a,null,o.a.createElement(p.a,{className:e.content},o.a.createElement(m.a,{className:e.title,color:"textSecondary",gutterBottom:!0},"Create Secret"),o.a.createElement(E.a,{onChange:u,value:l.label,id:"label",name:"label",label:"Label"}),o.a.createElement(E.a,{multiline:!0,label:"Secret Text",id:"secret-text",onChange:u,value:l.text,name:"text"}),o.a.createElement(E.a,{name:"shares",select:!0,label:"Shares",id:"parts",SelectProps:{native:!0},"data-testid":"parts",value:l.shares,onChange:u},d.map((function(e){return o.a.createElement("option",{key:e,value:e},e)}))),o.a.createElement(E.a,{name:"threshold",select:!0,SelectProps:{native:!0},id:"threshold","data-testid":"threshold",label:"Threshold",value:l.threshold,onChange:u},f.map((function(e){return o.a.createElement("option",{key:e,value:e},e)}))),o.a.createElement("p",null,"In order to reassemble your secret, you will need ",l.threshold," out of ",l.shares," pieces. Your label will be printed at the top of each page.")),o.a.createElement(x.a,null,o.a.createElement(w.a,{type:"submit",color:"primary","data-testid":"done-btn",variant:"outlined"},"Done"))))}var M=a(144),J=a.n(M),z=a(146),H=a.n(z),V=a(300),Y=a(89),G=a.n(Y),Z=a(147),$=a.n(Z),K=Object(d.a)({cardContent:{display:"flex",flexDirection:"column"}});function X(e){return null!=e}var ee={shares:4,parts:{},scanIndex:void 0},te=function(e){};function ae(e,t){switch(t.type){case"reset":return ee;case"setShares":return Object(N.a)({},e,{shares:t.payload,parts:{}});case"setPart":var a,n=t.payload,r="shares"in n?n.shares:e.shares,o=e.parts;if(r!==e.shares&&(o={}),""===n.hex.trim())return delete(o=Object(N.a)({},o))[n.index],Object(N.a)({},e,{parts:o,shares:r});var s=(null===(a=t.meta)||void 0===a?void 0:a.scan)||e.scanIndex;return Object(N.a)({},e,{parts:Object(N.a)({},o,Object(y.a)({},n.index,n)),shares:r,scanIndex:s});case"clearScan":return e.scanIndex===t.payload?Object(N.a)({},e,{scanIndex:void 0}):e;default:te(t)}return e}function ne(e){var t,a,n=Number(e.get("index")),r=e.get("hex"),o=Number(null!==(t=e.get("shares"))&&void 0!==t?t:e.get("numParts")),s=e.get("label"),l=Number(null!==(a=e.get("threshold"))&&void 0!==a?a:e.get("quorum"));return!isNaN(n)&&n>0&&r&&!isNaN(o)&&o>0&&!isNaN(l)&&l>0&&null!=s?{index:n,hex:r,label:s,shares:o,threshold:l}:null}function re(e){var t=ne(function(){var e=Object(c.g)(),t=e.hash||e.search;return new URLSearchParams(t.replace(/^#/,"?"))}());o.a.useEffect((function(){null!=t&&e(t)}),[e,t])}function oe(){var e=K(),t=Object(c.f)(),a=o.a.useState(!1),r=Object(g.a)(a,2),s=r[0],l=r[1],i=o.a.useState(null),u=Object(g.a)(i,2),d=u[0],m=u[1],f=o.a.useMemo((function(){return new Audio($.a)}),[]),j=function(e,t){var a=o.a.useState((function(){try{var a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(n){return console.error(n),t}})),n=Object(g.a)(a,2),r=n[0],s=n[1];return[r,function(t){try{var a=t instanceof Function?t(r):t;s(a),window.localStorage.setItem(e,JSON.stringify(a))}catch(n){console.error(n)}}]}("state",ee),S=Object(g.a)(j,2),O=S[0],k=S[1],A=o.a.useReducer(ae,O),C=Object(g.a)(A,2),_=C[0],R=C[1];o.a.useEffect((function(){O!==_&&k(_)}),[k,_,O]),re(o.a.useCallback((function(e){R({type:"setPart",payload:e}),t.replace(n.Assemble)}),[t]));var I=_.shares,L=_.parts,W=function(e,t){var a,n=null!==(a=L[e])&&void 0!==a?a:{index:e,hex:""};R({type:"setPart",payload:Object(N.a)({},n,{hex:t})})},q=o.a.useCallback((function(e){e&&e.preventDefault();try{var t=Object(T.a)(Object.values(L));m(t),R({type:"reset"})}catch(e){console.error(e)}}),[L]);o.a.useEffect((function(){var e=Object.values(_.parts).filter(X),t=e.every((function(t){return"label"in t&&"label"in e[0]&&t.label===e[0].label&&t.shares===e[0].shares&&t.threshold===e[0].threshold}));e[0]&&"threshold"in e[0]&&e.length===e[0].threshold&&t&&q()}),[q,_.parts]);o.a.useEffect((function(){if(null!=_.scanIndex){try{window.navigator.vibrate(200)}catch(e){console.error(e)}try{f.play()}catch(e){console.error(e)}}}),[f,_.scanIndex]);for(var U=new Array(b-v).fill(0).map((function(e,t){return o.a.createElement(V.a,{key:t,value:t+v},t+v)})),D=[],B=1;B<=I;B++)D.push(o.a.createElement(P,{key:"".concat(B,"/").concat(I),index:B,part:L[B],onChange:W}));return d?o.a.createElement(h.a,null,o.a.createElement(p.a,null,d)):o.a.createElement("form",{onSubmit:q},o.a.createElement(h.a,null,o.a.createElement(p.a,{className:H()(e.cardContent,Object(y.a)({},G.a.success,null!=_.scanIndex))},s?o.a.createElement(o.a.Fragment,null,o.a.createElement(J.a,{className:G.a.qr,delay:500,onError:function(e){console.error(e)},onScan:function(e){if(e)try{var t,a=ne(new URL(e.replace(/#/,"?")).searchParams);if(null!=a&&a.hex!==(null===(t=L[a.index])||void 0===t?void 0:t.hex)){var n=Math.random();R({type:"setPart",payload:a,meta:{scan:n}}),setTimeout((function(){R({type:"clearScan",payload:n})}),1e3)}}catch(r){}}}),o.a.createElement(w.a,{variant:"outlined",onClick:function(){return l(!1)}},"Stop Scanning")):o.a.createElement(w.a,{variant:"outlined",onClick:function(){return l(!0)}},"Scan QR Codes"),o.a.createElement("br",null),o.a.createElement(E.a,{name:"shares",select:!0,label:"Shares",value:I,onChange:function(e){R({type:"setShares",payload:Number(e.target.value)})}},U),D),o.a.createElement(x.a,null,o.a.createElement(w.a,{type:"submit",color:"primary",variant:"outlined","data-testid":"done-btn"},"Done"))))}var se=a(299),le=a(295),ce=a(148),ie=a.n(ce);function ue(){var e=Object(c.g)(),t=Object(c.f)(),a=n.Edit;switch(e.pathname){case n.Assemble:a=n.Assemble;break;case n.Edit:case n.Print:default:a=n.Edit}return o.a.createElement("nav",{className:ie.a.nav},o.a.createElement(se.a,{value:a,onChange:function(e,a){t.push(a)}},o.a.createElement(le.a,{value:n.Edit,label:"New Secret"}),o.a.createElement(le.a,{value:n.Assemble,label:"Assemble Secret"})))}var de=Object(d.a)({home:{margin:"1em 0"}});function he(){var e=de();return o.a.createElement(h.a,{className:e.home},o.a.createElement(p.a,null,o.a.createElement(m.a,{component:"h1"},"Experimental"),o.a.createElement("p",null,"This project is still experimental and may continue to change. I cannot guarantee that pages printed today will continue to scan in the future."),o.a.createElement(m.a,{component:"h1"},"Overview"),o.a.createElement("p",null,"Say you have an important password to backup in case you ever forget it. Maybe you use a password manager for most passwords, but how do you backup your password for your password manager? You don\u2019t want to just write it down because anyone who finds it will have your password."),o.a.createElement("p",null,"Using the Shamir Secret Splitter you can split your password into pices and store them in different places. You might decide to split it into 4 pages and any set of 3 can be used to assemble the password."),o.a.createElement("p",null,"Each page contains a QR code with a link back to this site. No special software is needed, just point your phone's camera at the page and follow the link. From the limited testing I\u2019ve done, it seems like QR code scanners are built into the default camera apps on Android and iOS. When the camera finds a QR code you should get some kind of notification asking if you want to open the link in your browser. If it doesn\u2019t work, you may need to go change a setting to turn on QR code scanning."),o.a.createElement("p",null,'When you arrive on the "Assemble Secret" page it has a Scan QR Codes button that you can use to scan the remaining pages. But what if you can\'t scan a QR code? Every page also has a series of words that contain the same piece of your secret as the QR code. If you need to, you can simply type those into the "Assemble Secret" page.'),o.a.createElement("p",null,"For additional details view the project on ",o.a.createElement("a",{href:f.repository,target:"_blank",rel:"noopener noreferrer"},"GitHub"))))}var pe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function me(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}l.a.render(o.a.createElement(j.a,{basename:"/shamir-secret-splitter"},o.a.createElement((function(){return o.a.createElement(i.a,{maxWidth:"sm"},o.a.createElement(u.a,null),o.a.createElement(ue,null),o.a.createElement(c.c,null,o.a.createElement(c.a,{path:n.Print},o.a.createElement(D,null)),o.a.createElement(c.a,{path:n.Assemble},o.a.createElement(oe,null)),o.a.createElement(c.a,{path:n.Edit},o.a.createElement(he,null),o.a.createElement(F,null))))}),null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/shamir-secret-splitter",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/shamir-secret-splitter","/service-worker.js");pe?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):me(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):me(t,e)}))}}()},52:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return l}));var n,r=a(15),o=a(67);function s(t){for(var a=e.from(t.toLowerCase().replace(/[^0-9a-f]+/g,""),"hex"),n=[],r=0;r<a.length;r++){var s=a[r];n.push(o[s][r%2])}return n}function l(t){if(null==n){n=[{},{}];for(var a=0;a<o.length;a++){var s=Object(r.a)(o[a],2),l=s[0],c=s[1];n[0][l.toLowerCase()]=a,n[1][c.toLowerCase()]=a}}var i=t.trim().toLowerCase().split(/\s+/g);if(0===t.trim().length)return"";for(var u=[],d=0;d<i.length;d++){var h=i[d],p=n[d%2][h];if(null==p)return{type:"INVALID_WORD",word:h};u.push(p)}return e.from(u).toString("hex").toUpperCase()}}).call(this,a(14).Buffer)},66:function(e,t,a){"use strict";(function(e){a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return l}));var n=a(15),r=a(87),o=a(143);function s(t){var a=(new TextEncoder).encode(t.text),s=r.split(o.randomBytes,t.shares,t.threshold,a);return Object.entries(s).map((function(a){var r=Object(n.a)(a,2),o=r[0],s=r[1];return{label:t.label,shares:t.shares,threshold:t.threshold,index:Number(o),hex:e.from(s).toString("hex")}}))}function l(t){var a=t.reduce((function(t,a){return t[a.index]=Uint8Array.from(e.from(a.hex,"hex")),t}),{}),n=new TextDecoder,o=r.join(a);return n.decode(o)}}).call(this,a(14).Buffer)},88:function(e,t,a){e.exports={print:"styles_print__2Fd6d",qr:"styles_qr__a3NcG",noPrint:"styles_noPrint__29SE-"}},89:function(e,t,a){e.exports={success:"styles_success__22bpf",qr:"styles_qr__1AxV_"}}},[[155,1,2]]]);
//# sourceMappingURL=main.c06948b4.chunk.js.map