(this["webpackJsonpshamir-secret-splitter"]=this["webpackJsonpshamir-secret-splitter"]||[]).push([[0],{105:function(e,t,n){e.exports={page:"styles_page__2ydav"}},107:function(e,t,n){e.exports={qr:"styles_qr__3rz3I",noPrint:"styles_noPrint__2Y233"}},110:function(e,t,n){e.exports={reader:"styles_reader__3noBR"}},111:function(e,t,n){e.exports=n(213)},116:function(e,t,n){},129:function(e,t){},131:function(e,t){},165:function(e,t){},166:function(e,t){},213:function(e,t,n){"use strict";n.r(t);var a,r=n(0),l=n.n(r),u=n(101),c=n.n(u),o=(n(116),n(17)),s=10,m=2;!function(e){e.Edit="/",e.Print="/print",e.Assemble="/assemble"}(a||(a={}));var i=n(6),f=n(24),d=n(16),p=n(102),b=n.n(p);function E(){var e=l.a.useMemo((function(){return Math.random().toString(16).substr(2)}),[]);return function(t){return t+"-"+e}}function h(e){var t,n=e.part,a=e.onChange,r=e.index,u=E(),c=null!==(t=null===n||void 0===n?void 0:n.hex)&&void 0!==t?t:"";return l.a.createElement("div",null,l.a.createElement("label",{htmlFor:u("hex")},"Part ",r),l.a.createElement("input",{onChange:function(e){a(r,e.target.value)},value:c,name:"hex",id:u("hex")}))}var v=n(105),x=n.n(v);function P(e){var t=e.part,n=e.children;return l.a.createElement("div",{className:x.a.page},l.a.createElement("h1",null,t.label),l.a.createElement("h2",null,t.index," of ",t.numParts),n,l.a.createElement("p",null,"If the QR code doesn't scan, you can type in the following:"),l.a.createElement("div",null,l.a.createElement(h,{part:t,onChange:function(){},index:t.index})))}var y=n(37),g=n(107),O=n.n(g);function j(){var e=Object(o.g)();return l.a.useMemo((function(){if(!e.state)return null;var t=Number(e.state.numParts||0),n=Number(e.state.quorum||0);return!t||!n||n>=t?null:{label:e.state.label||"",text:e.state.text||"",numParts:t,quorum:n}}),[e.state])}function S(){var e=Object(o.f)(),t=j(),n=function(e){return l.a.useMemo((function(){if(null!=e)return Object(y.b)(e)}),[e])}(t);if(l.a.useEffect((function(){null!=n&&null!=t&&t.label&&t.text&&t.numParts&&t.quorum||e.push(a.Edit,t)}),[e,n,t]),null==n)return null;var r=a.Edit;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:O.a.noPrint},l.a.createElement("h1",null,"Secret"),l.a.createElement("pre",null,JSON.stringify(t,null,2)),l.a.createElement(d.b,{to:{pathname:a.Edit,state:t}},"Edit")),n.map((function(e){return l.a.createElement(P,{part:e,key:e.index},l.a.createElement(b.a,{renderAs:"svg",size:512,value:JSON.stringify(r)}))})))}var w={label:"",text:"",numParts:4,quorum:3};function q(){for(var e=Object(o.f)(),t=E(),n=j()||w,r=l.a.useState(n),u=Object(f.a)(r,2),c=u[0],d=u[1],p=function(e){var t=Object(i.a)({},e.target.name,e.target.value);d((function(e){return Object.assign({},e,t)}))},b=[],h=[],v=1;v<=s;v++)v>=m&&b.push(v),v<=c.numParts&&h.push(v);return l.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.push(a.Print,c)}},l.a.createElement("h2",null,"NewSecret"),l.a.createElement("label",{htmlFor:t("label")},"Label"),l.a.createElement("input",{onChange:p,value:c.label,name:"label",id:t("label")}),l.a.createElement("br",null),l.a.createElement("label",{htmlFor:t("text")},"Secret Text"),l.a.createElement("textarea",{onChange:p,value:c.text,name:"text",id:t("text")}),l.a.createElement("br",null),l.a.createElement("label",{htmlFor:t("quorum")},"quorum"),l.a.createElement("select",{name:"quorum",id:t("quorum"),value:c.quorum,onChange:p},h.map((function(e){return l.a.createElement("option",{key:e,value:e},e)}))),l.a.createElement("br",null),l.a.createElement("label",{htmlFor:t("numParts")},"Parts"),l.a.createElement("select",{name:"numParts",id:t("numParts"),value:c.numParts,onChange:p},b.map((function(e){return l.a.createElement("option",{key:e,value:e},e)}))),l.a.createElement("br",null),l.a.createElement("button",{type:"submit"},"Done"))}var N=n(21),_=n(108),C=n.n(_),k=n(110),F=n.n(k),A=function(e){};function B(e,t){switch(t.type){case"scan":return Object(N.a)({},e,{scanning:!0});case"setNumParts":return Object(N.a)({},e,{numParts:t.payload,parts:{}});case"setPart":var n=t.payload,a="numParts"in n?n.numParts:e.numParts,r=e.parts;return a!==e.numParts&&(r={}),Object(N.a)({},e,{parts:Object(N.a)({},r,Object(i.a)({},n.index,n)),numParts:a});case"setSecret":return Object(N.a)({},e,{secret:t.payload});default:A(t)}return e}var D={scanning:!1,secret:null,numParts:4,parts:{}};function J(){var e=E(),t=new URLSearchParams(Object(o.g)().search),n=Object(o.f)(),r=l.a.useReducer(B,D),u=Object(f.a)(r,2),c=u[0],i=u[1],d=c.secret,p=c.numParts,b=c.scanning,v=c.parts,x=t.get("index"),P=t.get("hex"),g=t.get("numParts");l.a.useEffect((function(){x&&P&&g&&n.replace(a.Edit,{index:x,hex:P,numParts:g})}),[n,P,x,g]);for(var O=function(e,t){var n,a=null!==(n=v[e])&&void 0!==n?n:{index:e,hex:""};i({type:"setPart",payload:Object(N.a)({},a,{hex:t})})},j=new Array(s-m).fill(0).map((function(e,t){return l.a.createElement("option",{key:t,value:t+m},t+m)})),S=[],w=1;w<=p;w++)S.push(l.a.createElement(h,{key:w,index:w,part:v[w],onChange:O}));return l.a.createElement("form",{onSubmit:function(e){e.preventDefault();try{var t=Object(y.a)(Object.values(v));i({type:"setSecret",payload:t})}catch(e){console.error(e)}}},l.a.createElement("h2",null,"AssembleSecret"),b?l.a.createElement(C.a,{className:F.a.reader,delay:500,onError:function(e){console.error(e)},onScan:function(e){if(console.log("scan",e),e)try{var t=JSON.parse(e);t.hex&&t.numParts&&t.index&&i({type:"setPart",payload:t})}catch(n){}}}):l.a.createElement("button",{onClick:function(){return i({type:"scan"})}},"Scan QR Codes"),l.a.createElement("br",null),l.a.createElement("label",{htmlFor:e("numParts")},"Parts"),l.a.createElement("select",{name:"numParts",id:e("numParts"),value:p,onChange:function(e){i({type:"setNumParts",payload:Number(e.target.value)})}},j),S,l.a.createElement("button",{type:"submit"},"Done"),d&&l.a.createElement("div",null,"Secret: ",d))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(d.a,{basename:"/shamir-secret-splitter"},l.a.createElement((function(){return l.a.createElement(o.c,null,l.a.createElement(o.a,{path:a.Print},l.a.createElement(S,null)),l.a.createElement(o.a,{path:a.Assemble},l.a.createElement(J,null)),l.a.createElement(o.a,{path:a.Edit},l.a.createElement(q,null)))}),null)),document.getElementById("root"))},37:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return c}));var a=n(24),r=n(57),l=n(106);function u(t){var n=(new TextEncoder).encode(t.text),u=r.split(l.randomBytes,t.numParts,t.quorum,n);return Object.entries(u).map((function(n){var r=Object(a.a)(n,2),l=r[0],u=r[1];return{label:t.label,numParts:t.numParts,quorum:t.quorum,index:Number(l),hex:e.from(u).toString("hex")}}))}function c(t){var n=t.reduce((function(t,n){return t[n.index]=Uint8Array.from(e.from(n.hex,"hex")),t}),{}),a=new TextDecoder,l=r.join(n);return a.decode(l)}}).call(this,n(5).Buffer)}},[[111,1,2]]]);
//# sourceMappingURL=main.9e7569be.chunk.js.map