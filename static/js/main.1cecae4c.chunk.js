(this["webpackJsonpshamir-secret-splitter"]=this["webpackJsonpshamir-secret-splitter"]||[]).push([[0],{139:function(e,t,a){e.exports={page:"styles_page__2ydav"}},141:function(e,t,a){e.exports={print:"styles_print__X66sV",qr:"styles_qr__3rz3I",noPrint:"styles_noPrint__2Y233"}},142:function(e,t,a){e.exports={form:"styles_form__2Hoej",quorum:"styles_quorum__36Y8D",parts:"styles_parts__3k7x6"}},145:function(e,t,a){e.exports={nav:"styles_nav__2cd2r",printTab:"styles_printTab__1Y1BP"}},151:function(e,t,a){e.exports=a(253)},156:function(e,t,a){},169:function(e,t){},171:function(e,t){},205:function(e,t){},206:function(e,t){},253:function(e,t,a){"use strict";a.r(t);var n,r=a(0),l=a.n(r),u=a(10),o=a.n(u),c=(a(156),a(36)),s=a(286),i=a(291),m=10,f=2;!function(e){e.Edit="/",e.Print="/print",e.Assemble="/assemble"}(n||(n={}));var b=a(6),p=a(17),d=a(283),v=a(287),h=a(284),E=a(25),g=a(136),x=a.n(g),y=a(28),P=a(58);var j={hex:"",text:"",error:null};function w(e,t){var a=Object(P.b)(t);if("string"!==typeof a){var n=t.split(/\s+/g);n.pop(),a=Object(P.b)(n.join(" "))}return"string"==typeof a?{hex:a,text:t,error:null}:Object(y.a)({},e,{text:t,error:"".concat(a.word," not recognized")})}function O(e){var t,a=e.part,n=e.onChange,r=e.index,u=function(){var e=l.a.useMemo((function(){return Math.random().toString(16).substr(2)}),[]);return function(t){return t+"-"+e}}(),o=null!==(t=null===a||void 0===a?void 0:a.hex)&&void 0!==t?t:"",c=l.a.useReducer(w,j,(function(e){var t=Object(P.a)(o).join(" ");return"string"===typeof t?Object(y.a)({},e,{text:t}):e})),s=Object(p.a)(c,2),i=s[0],m=s[1];return l.a.createElement(v.a,{onChange:function(e){if(n){var t=e.target.value;m(t);var a=Object(P.b)(t);"string"===typeof a&&a!==o&&n(r,a)}},multiline:!0,id:u("part-".concat(r)),error:null!=i.error,helperText:i.error,value:i.text,name:"label",label:"Part ".concat(r)})}var _=a(139),S=a.n(_);function N(e){var t=e.part,a=e.children,r=Object(c.f)(),u=window.location.protocol+"//"+window.location.host+r.createHref({pathname:n.Assemble});return l.a.createElement("div",{className:S.a.page},l.a.createElement("h1",null,t.label),l.a.createElement("h2",null,t.index," of ",t.numParts),a,l.a.createElement("strong",null,u),l.a.createElement("p",null,"If the QR code doesn't scan, you can go to the URL above and type in the following into the textbox for ",l.a.createElement("strong",null,"Part ",t.index),":"),l.a.createElement(O,{part:t,index:t.index}))}var q=a(67),C=a(141),k=a.n(C);function A(){var e=Object(c.g)();return l.a.useMemo((function(){if(!e.state)return null;var t=Number(e.state.numParts||0),a=Number(e.state.quorum||0);return!t||!a||a>=t?null:{label:e.state.label||"",text:e.state.text||"",numParts:t,quorum:a}}),[e.state])}function L(){var e=Object(c.f)(),t=A(),a=function(e){return l.a.useMemo((function(){if(null!=e)return Object(q.b)(e)}),[e])}(t);return l.a.useEffect((function(){null!=a&&null!=t&&t.label&&t.text&&t.numParts&&t.quorum||e.push(n.Edit,t)}),[e,a,t]),null==a||null==t?null:l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:k.a.noPrint},l.a.createElement("p",null,"Thew following pages contain your secret. Print them and distribute them to different locations. From the Assemble Secret page, if you scan any ",t.quorum,"of these codes, it will display your secret."),l.a.createElement(E.b,{to:{pathname:n.Edit,state:t}},l.a.createElement(h.a,{variant:"outlined"},"Edit")),l.a.createElement(h.a,{onClick:function(){return window.print()},variant:"outlined"},"Print")),a.map((function(t){var a=new URLSearchParams;a.set("index",String(t.index)),a.set("hex",t.hex),a.set("numParts",String(t.numParts)),a.set("quorum",String(t.quorum)),a.set("label",String(t.label));var r={pathname:n.Assemble,search:a.toString()},u=window.location.protocol+"//"+window.location.host+e.createHref(r);return l.a.createElement(N,{part:t,key:t.index},l.a.createElement(E.b,{to:r},l.a.createElement(x.a,{renderAs:"svg",size:512,value:u})))})))}var R=a(142),D=a.n(R),I={label:"",text:"",numParts:4,quorum:3};function T(){for(var e=Object(c.f)(),t=A()||I,a=l.a.useState(t),r=Object(p.a)(a,2),u=r[0],o=r[1],s=function(e){var t=Object(b.a)({},e.target.name,e.target.value);o((function(e){return Object.assign({},e,t)}))},i=[],E=[],g=1;g<=m;g++)g>=f&&i.push(g),g<u.numParts&&E.push(g);return l.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.push(n.Print,u)}},l.a.createElement(d.a,{className:D.a.form},l.a.createElement(v.a,{onChange:s,value:u.label,id:"label",name:"label",label:"Label"}),l.a.createElement(v.a,{multiline:!0,label:"Secret Text",id:"secret-text",onChange:s,value:u.text,name:"text"}),l.a.createElement(v.a,{name:"quorum",select:!0,SelectProps:{native:!0},id:"quorum","data-testid":"quorum",label:"quorum",value:u.quorum,onChange:s},E.map((function(e){return l.a.createElement("option",{key:e,value:e},e)}))),l.a.createElement(v.a,{name:"numParts",select:!0,label:"Parts",id:"parts",SelectProps:{native:!0},"data-testid":"parts",value:u.numParts,onChange:s},i.map((function(e){return l.a.createElement("option",{key:e,value:e},e)}))),l.a.createElement(h.a,{type:"submit",color:"primary",variant:"outlined"},"Done")))}var B=a(143),U=a.n(B),F=a(290),J=a(69),M=a.n(J);function z(e){return null!=e}var H=function(e){};function Y(e,t){switch(t.type){case"setNumParts":return Object(y.a)({},e,{numParts:t.payload,parts:{}});case"setPart":var a=t.payload,n="numParts"in a?a.numParts:e.numParts,r=e.parts;return n!==e.numParts&&(r={}),""===a.hex.trim()?(delete(r=Object(y.a)({},r))[a.index],Object(y.a)({},e,{parts:r,numParts:n})):Object(y.a)({},e,{parts:Object(y.a)({},r,Object(b.a)({},a.index,a)),numParts:n});default:H(t)}return e}var Q={numParts:4,parts:{}};function V(e){var t=Number(e.get("index")),a=e.get("hex"),n=Number(e.get("numParts")),r=e.get("label"),l=Number(e.get("quorum"));return!isNaN(t)&&t>0&&a&&!isNaN(n)&&n>0&&!isNaN(l)&&l>0&&null!=r?{index:t,hex:a,label:r,numParts:n,quorum:l}:null}function W(e){var t=V(new URLSearchParams(Object(c.g)().search));l.a.useEffect((function(){null!=t&&e(t)}),[e,t])}function X(){var e=Object(c.f)(),t=l.a.useState(!1),a=Object(p.a)(t,2),r=a[0],u=a[1],o=l.a.useState(null),s=Object(p.a)(o,2),i=s[0],b=s[1],E=function(e,t){var a=l.a.useState((function(){try{var a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(n){return console.error(n),t}})),n=Object(p.a)(a,2),r=n[0],u=n[1];return[r,function(t){try{var a=t instanceof Function?t(r):t;u(a),window.localStorage.setItem(e,JSON.stringify(a))}catch(n){console.error(n)}}]}("state",Q),g=Object(p.a)(E,2),x=g[0],P=g[1],j=l.a.useReducer(Y,x),w=Object(p.a)(j,2),_=w[0],S=w[1];l.a.useEffect((function(){x!==_&&P(_)}),[P,_,x]),W(l.a.useCallback((function(t){S({type:"setPart",payload:t}),e.replace(n.Assemble)}),[e]));var N=_.numParts,C=_.parts,k=function(e,t){var a,n=null!==(a=C[e])&&void 0!==a?a:{index:e,hex:""};S({type:"setPart",payload:Object(y.a)({},n,{hex:t})})},A=l.a.useCallback((function(e){e&&e.preventDefault();try{var t=Object(q.a)(Object.values(C));b(t)}catch(e){console.error(e)}}),[C]);l.a.useEffect((function(){var e=Object.values(_.parts).filter(z),t=e.every((function(t){return"label"in t&&"label"in e[0]&&t.label===e[0].label&&t.numParts===e[0].numParts&&t.quorum===e[0].quorum}));e[0]&&"quorum"in e[0]&&e.length===e[0].quorum&&t&&A()}),[A,_.parts]);for(var L=new Array(m-f).fill(0).map((function(e,t){return l.a.createElement(F.a,{key:t,value:t+f},t+f)})),R=[],D=1;D<=N;D++)R.push(l.a.createElement(O,{key:"".concat(D,"/").concat(N),index:D,part:C[D],onChange:k}));return i?l.a.createElement(d.a,{className:M.a.assemble},i):l.a.createElement("form",{onSubmit:A},l.a.createElement(d.a,{className:M.a.assemble},r?l.a.createElement(l.a.Fragment,null,l.a.createElement(U.a,{className:M.a.reader,delay:500,onError:function(e){console.error(e)},onScan:function(e){if(e)try{var t=V(new URL(e).searchParams);null!=t&&S({type:"setPart",payload:t})}catch(a){}}}),l.a.createElement(h.a,{variant:"outlined",onClick:function(){return u(!1)}},"Stop Scanning")):l.a.createElement(h.a,{variant:"outlined",onClick:function(){return u(!0)}},"Scan QR Codes"),l.a.createElement("br",null),l.a.createElement(v.a,{name:"numParts",select:!0,label:"Parts",value:N,onChange:function(e){S({type:"setNumParts",payload:Number(e.target.value)})}},L),R,l.a.createElement(h.a,{type:"submit",color:"primary",variant:"outlined"},"Done")))}var $=a(289),G=a(285),K=a(145),Z=a.n(K);function ee(){var e=Object(c.g)(),t=Object(c.f)(),a=n.Edit;switch(e.pathname){case n.Assemble:a=n.Assemble;break;case n.Edit:case n.Print:default:a=n.Edit}return l.a.createElement("nav",{className:Z.a.nav},l.a.createElement($.a,{value:a,onChange:function(e,a){t.push(a)}},l.a.createElement(G.a,{value:n.Edit,label:"New Secret"}),l.a.createElement(G.a,{value:n.Assemble,label:"Assemble Secret"})))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(E.a,{basename:"/shamir-secret-splitter"},l.a.createElement((function(){return l.a.createElement(s.a,{maxWidth:"sm"},l.a.createElement(i.a,null),l.a.createElement(ee,null),l.a.createElement(c.c,null,l.a.createElement(c.a,{path:n.Print},l.a.createElement(L,null)),l.a.createElement(c.a,{path:n.Assemble},l.a.createElement(X,null)),l.a.createElement(c.a,{path:n.Edit},l.a.createElement(T,null))))}),null)),document.getElementById("root"))},58:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return o}));var n,r=a(17),l=a(68);function u(t){for(var a=e.from(t.toLowerCase().replace(/[^0-9a-f]+/g,""),"hex"),n=[],r=0;r<a.length;r++){var u=a[r];n.push(l[u][r%2])}return n}function o(t){if(null==n){n=[{},{}];for(var a=0;a<l.length;a++){var u=Object(r.a)(l[a],2),o=u[0],c=u[1];n[0][o.toLowerCase()]=a,n[1][c.toLowerCase()]=a}}var s=t.trim().toLowerCase().split(/\s+/g);if(0===t.trim().length)return"";for(var i=[],m=0;m<s.length;m++){var f=s[m],b=n[m%2][f];if(null==b)return{type:"INVALID_WORD",word:f};i.push(b)}return e.from(i).toString("hex").toUpperCase()}}).call(this,a(14).Buffer)},67:function(e,t,a){"use strict";(function(e){a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return o}));var n=a(17),r=a(89),l=a(140);function u(t){var a=(new TextEncoder).encode(t.text),u=r.split(l.randomBytes,t.numParts,t.quorum,a);return Object.entries(u).map((function(a){var r=Object(n.a)(a,2),l=r[0],u=r[1];return{label:t.label,numParts:t.numParts,quorum:t.quorum,index:Number(l),hex:e.from(u).toString("hex")}}))}function o(t){var a=t.reduce((function(t,a){return t[a.index]=Uint8Array.from(e.from(a.hex,"hex")),t}),{}),n=new TextDecoder,l=r.join(a);return n.decode(l)}}).call(this,a(14).Buffer)},69:function(e,t,a){e.exports={assemble:"styles_assemble__1ky0g"}}},[[151,1,2]]]);
//# sourceMappingURL=main.1cecae4c.chunk.js.map